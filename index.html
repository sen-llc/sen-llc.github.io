<!-- Add this section right after the hero section, before the next section -->
<section class="quiz-section py-16 md:py-24 bg-white">
  <div class="container mx-auto px-6">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl md:text-3xl font-normal text-[#2a382f] mb-8 text-center">あなたに合った住まいの選択肢は？</h2>
      <p class="text-center text-[#2a382f]/80 mb-12">簡単な質問に答えて、あなたに最適なサービスを見つけましょう</p>
      
      <!-- Quiz Container -->
      <div id="quiz-container" class="bg-[#f8f5f0] p-8 md:p-12 rounded-sm shadow-sm">
        <!-- Progress Bar -->
        <div class="mb-8">
          <div class="flex justify-between items-center mb-2">
            <span id="quiz-progress-text" class="text-sm text-[#2a382f]/70">質問 <span id="current-step">1</span>/3</span>
            <span id="quiz-progress-percentage" class="text-sm text-[#2a382f]/70">33%</span>
          </div>
          <div class="w-full bg-[#d7d3c6]/50 h-2 rounded-full overflow-hidden">
            <div id="quiz-progress-bar" class="bg-[#9b785c] h-full rounded-full" style="width: 33%"></div>
          </div>
        </div>
        
        <!-- Questions -->
        <div id="quiz-questions">
          <!-- Question 1 -->
          <div class="quiz-question" data-question="1">
            <h3 class="text-xl font-medium text-[#2a382f] mb-6">現在、お住まいは持ち家ですか？</h3>
            <div class="space-y-4">
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="はい">
                はい（持ち家がある）
              </button>
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="いいえ">
                いいえ（持ち家ではない）
              </button>
            </div>
          </div>
          
          <!-- Question 2 -->
          <div class="quiz-question hidden" data-question="2">
            <h3 class="text-xl font-medium text-[#2a382f] mb-6">これからの住まい探しでは、賃貸と購入のどちらをお考えですか？</h3>
            <div class="space-y-4">
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="賃貸">
                賃貸を探している
              </button>
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="購入">
                家を購入したい
              </button>
            </div>
          </div>
          
          <!-- Question 3 -->
          <div class="quiz-question hidden" data-question="3">
            <h3 class="text-xl font-medium text-[#2a382f] mb-6">住まいのデザインは…自分で楽しみながらやりたいですか？それともプロと一緒に作りたいですか？</h3>
            <div class="space-y-4">
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="DIY">
                DIYなど、自分で自由に手を加えたい
              </button>
              <button class="quiz-answer w-full text-left p-4 border border-[#2a382f]/20 rounded-md hover:bg-[#2a382f] hover:text-white transition-colors" data-value="プロ">
                プロと一緒に進めたい
              </button>
            </div>
          </div>
        </div>
        
        <!-- Results (Hidden initially) -->
        <div id="quiz-result" class="hidden">
          <div id="result-育てる住まい" class="hidden">
            <div class="text-center">
              <div class="inline-block p-3 rounded-full bg-[#2a382f]/10 mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="text-[#2a382f]">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
              </div>
              <h3 class="text-2xl font-medium text-[#2a382f] mb-4">あなたには『育てる住まい』がぴったりかもしれません。</h3>
              <p id="result-育てる住まい-diy" class="mb-8 hidden">DIYで手を加えながら、自分らしい暮らしを育てていきませんか？</p>
              <p id="result-育てる住まい-プロ" class="mb-8 hidden">プロのサポートも受けながら、自分らしい暮らしを育てていきませんか？</p>
              <a href="rental.html" class="btn-primary py-3 px-8 inline-flex items-center">
                ▶ 育てる住まいのページを見る
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="ml-2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </a>
            </div>
          </div>
          
          <div id="result-リノベーション" class="hidden">
            <div class="text-center">
              <div class="inline-block p-3 rounded-full bg-[#9b785c]/10 mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="text-[#9b785c]">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                </svg>
              </div>
              <h3 class="text-2xl font-medium text-[#2a382f] mb-4">理想の住まいを、プロと一緒にゼロからつくる。</h3>
              <p id="result-リノベーション-diy" class="mb-8 hidden">DIYのアイデアも活かしながら、プロと一緒に家づくりを進めましょう。</p>
              <p id="result-リノベーション-プロ" class="mb-8 hidden">あなたにはリノベーションという選択が合っているかもしれません。</p>
              <a href="renovation.html" class="btn-primary py-3 px-8 inline-flex items-center">
                ▶ リノベーションのページを見る
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="ml-2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </a>
            </div>
          </div>
          
          <div class="text-center mt-8">
            <a href="contact.html" class="text-sm text-[#2a382f]/70 hover:text-[#2a382f] underline">まだ迷っていますか？お問い合わせください。</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Add this script at the end of the body tag -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Quiz state
    const quizState = {
      currentQuestion: 1,
      totalQuestions: 3,
      answers: {},
      result: null
    };
    
    // DOM elements
    const quizContainer = document.getElementById('quiz-container');
    const questions = document.querySelectorAll('.quiz-question');
    const progressBar = document.getElementById('quiz-progress-bar');
    const progressText = document.getElementById('current-step');
    const progressPercentage = document.getElementById('quiz-progress-percentage');
    const resultContainer = document.getElementById('quiz-result');
    const resultRental = document.getElementById('result-育てる住まい');
    const resultRenovation = document.getElementById('result-リノベーション');
    
    // Add event listeners to all answer buttons
    document.querySelectorAll('.quiz-answer').forEach(button => {
      button.addEventListener('click', function() {
        const questionNumber = parseInt(this.closest('.quiz-question').dataset.question);
        const answer = this.dataset.value;
        
        // Save the answer
        quizState.answers[questionNumber] = answer;
        
        // If it's the last question, show the result
        if (questionNumber === quizState.totalQuestions) {
          calculateResult();
          showResult();
        } else {
          // Otherwise, go to the next question
          goToNextQuestion();
        }
      });
    });
    
    // Function to go to the next question
    function goToNextQuestion() {
      // Hide current question
      document.querySelector(`.quiz-question[data-question="${quizState.currentQuestion}"]`).classList.add('hidden');
      
      // Increment current question
      quizState.currentQuestion++;
      
      // Show next question with fade-in effect
      const nextQuestion = document.querySelector(`.quiz-question[data-question="${quizState.currentQuestion}"]`);
      nextQuestion.classList.remove('hidden');
      nextQuestion.style.opacity = 0;
      setTimeout(() => {
        nextQuestion.style.opacity = 1;
        nextQuestion.style.transition = 'opacity 0.5s ease';
      }, 10);
      
      // Update progress
      updateProgress();
    }
    
    // Function to update progress bar and text
    function updateProgress() {
      const progress = (quizState.currentQuestion / quizState.totalQuestions) * 100;
      progressBar.style.width = `${progress}%`;
      progressText.textContent = quizState.currentQuestion;
      progressPercentage.textContent = `${progress}%`;
    }
    
    // Function to calculate the result based on answers
    function calculateResult() {
      // Logic as specified in requirements
      if (quizState.answers[1] === 'はい') {
        quizState.result = 'リノベーション';
      } else if (quizState.answers[1] === 'いいえ' && quizState.answers[2] === '賃貸') {
        quizState.result = '育てる住まい';
      } else if (quizState.answers[1] === 'いいえ' && quizState.answers[2] === '購入') {
        quizState.result = 'リノベーション';
      }
      
      // Store the DIY preference for personalized message
      quizState.diyPreference = quizState.answers[3];
    }
    
    // Function to show the result
    function showResult() {
      // Hide questions
      document.getElementById('quiz-questions').classList.add('hidden');
      document.querySelector('.mb-8').classList.add('hidden'); // Hide progress bar
      
      // Show result container
      resultContainer.classList.remove('hidden');
      
      // Show appropriate result based on calculation
      if (quizState.result === '育てる住まい') {
        resultRental.classList.remove('hidden');
        
        // Show personalized message based on DIY preference
        if (quizState.diyPreference === 'DIY') {
          document.getElementById('result-育てる住まい-diy').classList.remove('hidden');
        } else {
          document.getElementById('result-育てる住まい-プロ').classList.remove('hidden');
        }
      } else {
        resultRenovation.classList.remove('hidden');
        
        // Show personalized message based on DIY preference
        if (quizState.diyPreference === 'DIY') {
          document.getElementById('result-リノベーション-diy').classList.remove('hidden');
        } else {
          document.getElementById('result-リノベーション-プロ').classList.remove('hidden');
        }
      }
      
      // Add fade-in effect
      resultContainer.style.opacity = 0;
      setTimeout(() => {
        resultContainer.style.opacity = 1;
        resultContainer.style.transition = 'opacity 0.5s ease';
      }, 10);
    }
    
    // Initialize the first question with fade-in effect
    const firstQuestion = document.querySelector('.quiz-question[data-question="1"]');
    firstQuestion.style.opacity = 0;
    setTimeout(() => {
      firstQuestion.style.opacity = 1;
      firstQuestion.style.transition = 'opacity 0.5s ease';
    }, 10);
  });
</script>
